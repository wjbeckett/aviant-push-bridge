version: '3.8'

services:
  aviant-push-bridge:
    # Use pre-built image from GitHub Container Registry
    image: ghcr.io/wjbeckett/aviant-push-bridge:latest
    container_name: aviant-push-bridge
    restart: unless-stopped
    ports:
      - "3002:3002"
    volumes:
      # Persist configuration and push token registrations
      - ./data:/app/data
    environment:
      - TZ=America/New_York
      # ============================================
      # REQUIRED: MQTT Broker Connection
      # ============================================
      - MQTT_HOST=mqtt://192.168.1.100:1883
      - MQTT_USERNAME=
      - MQTT_PASSWORD=
      - MQTT_TOPIC=frigate/reviews
      
      # ============================================
      # OPTIONAL: Bridge Settings
      # ============================================
      - BRIDGE_PORT=3002
      - NOTIFICATION_COOLDOWN=30
      
      # ============================================
      # OPTIONAL: Notification Filters
      # ============================================
      # Severity filter: 'alert' (default), 'detection', or 'all'
      # 'alert' = Only high-priority events (person, car, or objects in alert zones)
      # 'detection' = Only low-priority general detections
      # 'all' = Everything
      - SEVERITY_FILTER=alert
      
      # Object/camera filters (comma-separated, leave empty for all)
      - FILTER_LABELS=
      - FILTER_CAMERAS=